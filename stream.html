<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Stream Player | Watch Sports Match</title>
    
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        .stream-page {
            background: #0f172a;
            min-height: 100vh;
            color: white;
        }
        
        .stream-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .stream-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid #334155;
            margin-bottom: 2rem;
        }
        
        .back-home {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #f87171;
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .match-info-card {
            background: #1e293b;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border-left: 4px solid #dc2626;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }
        
        .match-title {
            font-size: 1.8rem;
            margin-bottom: 1rem;
            color: white;
        }
        
        .match-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .match-detail {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .match-detail i {
            color: #f87171;
        }
        
        .detail-label {
            font-size: 0.9rem;
            color: #94a3b8;
        }
        
        .detail-value {
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .stream-player-section {
            background: #000;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        
        .player-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
        }
        
        .player-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .player-controls {
            background: #1e293b;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .control-buttons {
            display: flex;
            gap: 10px;
        }
        
        .ads-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 2rem 0;
        }
        
        .ad-space {
            background: #1e293b;
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            border: 2px dashed #475569;
            min-height: 250px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .ad-space i {
            font-size: 3rem;
            color: #475569;
            margin-bottom: 1rem;
        }
        
        .alternative-streams {
            background: #1e293b;
            border-radius: 12px;
            padding: 2rem;
            margin-top: 2rem;
        }
        
        .alt-streams-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .alt-stream-card {
            background: #334155;
            padding: 1rem;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: all 0.3s;
        }
        
        .alt-stream-card:hover {
            background: #475569;
            transform: translateY(-2px);
        }
        
        .stream-info {
            flex: 1;
        }
        
        .stream-name {
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .quality-badge {
            background: #dc2626;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-block;
        }
        
        .chat-section {
            background: #1e293b;
            border-radius: 12px;
            padding: 2rem;
            margin-top: 2rem;
        }
        
        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .chat-messages {
            height: 300px;
            overflow-y: auto;
            padding: 1rem;
            background: #0f172a;
            border-radius: 8px;
            margin-bottom: 1rem;
        }
        
        .message {
            padding: 8px 12px;
            margin-bottom: 8px;
            border-radius: 6px;
            background: #1e293b;
        }
        
        .message.system {
            background: #334155;
            font-style: italic;
            color: #94a3b8;
        }
        
        .message.user {
            background: #1e293b;
        }
        
        .message.other-user {
            background: #334155;
        }
        
        .message-user {
            font-weight: 600;
            color: #f87171;
            margin-right: 8px;
        }
        
        .message-time {
            color: #94a3b8;
            font-size: 0.9rem;
            margin-right: 8px;
        }
        
        .chat-input {
            display: flex;
            gap: 10px;
        }
        
        .chat-input input {
            flex: 1;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #475569;
            background: #0f172a;
            color: white;
            font-size: 1rem;
        }
        
        .stream-stats {
            display: flex;
            gap: 2rem;
            padding: 1rem;
            background: #1e293b;
            border-radius: 8px;
            margin: 2rem 0;
            flex-wrap: wrap;
            justify-content: space-around;
        }
        
        .stat-item {
            text-align: center;
            min-width: 120px;
        }
        
        .stat-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: #f87171;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #94a3b8;
        }
        
        .fullscreen-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #dc2626;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.5);
            z-index: 100;
        }
        
        .stream-icon {
            font-size: 1.5rem;
            color: #f87171;
        }
        
        .online-count {
            color: #94a3b8;
            font-size: 0.9rem;
        }
    </style>
</head>
<body class="stream-page">
    <!-- Stream Header -->
    <div class="stream-container">
        <div class="stream-header">
            <a href="index.html" class="back-home">
                <i class="fas fa-arrow-left"></i>
                <span>Back to All Matches</span>
            </a>
            
            <div class="stream-title">
                <h1><i class="fas fa-play-circle" style="color: #dc2626;"></i> Live Stream Player</h1>
            </div>
            
            <div class="stream-actions">
                <button class="btn btn-outline" id="refreshBtn">
                    <i class="fas fa-redo"></i> Refresh Stream
                </button>
            </div>
        </div>
        
        <!-- Match Info -->
        <div class="match-info-card">
            <h2 class="match-title" id="matchTitle">Loading Match Information...</h2>
            
            <div class="match-details-grid">
                <div class="match-detail">
                    <i class="far fa-clock"></i>
                    <div>
                        <div class="detail-label">Time</div>
                        <div class="detail-value" id="matchTime">Loading...</div>
                    </div>
                </div>
                
                <div class="match-detail">
                    <i class="fas fa-trophy"></i>
                    <div>
                        <div class="detail-label">Tournament</div>
                        <div class="detail-value" id="matchTournament">Loading...</div>
                    </div>
                </div>
                
                <div class="match-detail">
                    <i class="fas fa-running"></i>
                    <div>
                        <div class="detail-label">Sport</div>
                        <div class="detail-value" id="matchSport">Loading...</div>
                    </div>
                </div>
                
                <div class="match-detail">
                    <i class="fas fa-circle"></i>
                    <div>
                        <div class="detail-label">Status</div>
                        <div class="detail-value" id="matchStatus">
                            <span class="live-badge">LIVE</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Stream Stats -->
        <div class="stream-stats">
            <div class="stat-item">
                <div class="stat-number" id="viewerCount">1,234</div>
                <div class="stat-label">Watching Now</div>
            </div>
            
            <div class="stat-item">
                <div class="stat-number" id="streamQuality">HD</div>
                <div class="stat-label">Quality</div>
            </div>
            
            <div class="stat-item">
                <div class="stat-number" id="bufferRate">0%</div>
                <div class="stat-label">Buffer</div>
            </div>
            
            <div class="stat-item">
                <div class="stat-number" id="streamDelay">Live</div>
                <div class="stat-label">Delay</div>
            </div>
        </div>
        
        <!-- Ad Space 1 -->
        <div class="ads-section">
            <div class="ad-space">
                <i class="fas fa-ad"></i>
                <h3>Advertisement Space 1</h3>
                <p>728x90 Leaderboard Ad</p>
                <small>For Google AdSense or direct ads</small>
            </div>
            
            <div class="ad-space">
                <i class="fas fa-ad"></i>
                <h3>Advertisement Space 2</h3>
                <p>300x250 Medium Rectangle</p>
                <small>High visibility for advertisers</small>
            </div>
        </div>
        
        <!-- Main Stream Player -->
        <div class="stream-player-section">
            <div class="player-container" id="playerContainer">
                <iframe id="mainStream" src="" allowfullscreen allow="autoplay; encrypted-media" frameborder="0"></iframe>
            </div>
            
            <div class="player-controls">
                <div class="control-buttons">
                    <button class="btn btn-small" id="playPauseBtn">
                        <i class="fas fa-pause"></i> Pause
                    </button>
                    <button class="btn btn-small" id="muteBtn">
                        <i class="fas fa-volume-up"></i> Mute
                    </button>
                    <button class="btn btn-small" id="qualityBtn">
                        <i class="fas fa-cog"></i> Quality
                    </button>
                </div>
                
                <div class="player-info">
                    <span id="currentTime">00:00</span> / <span id="totalTime">00:00</span>
                </div>
            </div>
        </div>
        
        <!-- Ad Space 2 -->
        <div class="ads-section">
            <div class="ad-space">
                <i class="fas fa-ad"></i>
                <h3>Advertisement Space 3</h3>
                <p>300x600 Skyscraper</p>
                <small>Sidebar advertisement space</small>
            </div>
            
            <div class="ad-space">
                <i class="fas fa-ad"></i>
                <h3>Advertisement Space 4</h3>
                <p>970x90 Billboard</p>
                <small>Premium advertising position</small>
            </div>
        </div>
        
        <!-- Alternative Streams -->
        <div class="alternative-streams">
            <h3><i class="fas fa-exchange-alt"></i> Alternative Streams</h3>
            <p>If the main stream has issues, try these alternative links:</p>
            
            <div class="alt-streams-grid" id="altStreams">
                <!-- Alternative streams will be loaded here -->
                <div class="alt-stream-card">
                    <div class="stream-icon">
                        <i class="fas fa-play-circle"></i>
                    </div>
                    <div class="stream-info">
                        <div class="stream-name">Stream 1 (Main)</div>
                        <div class="quality-badge">HD</div>
                    </div>
                    <button class="btn btn-small" onclick="switchStream('https://topembed.pw/channel/exlosanch11')">
                        Switch
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Live Chat -->
        <div class="chat-section">
            <div class="chat-header">
                <h3><i class="fas fa-comments"></i> Live Chat</h3>
                <span class="online-count">
                    <i class="fas fa-users"></i> <span id="onlineUsers">124</span> online
                </span>
            </div>
            
            <div class="chat-messages" id="chatMessages">
                <div class="message system">
                    <span class="message-time">[12:30]</span>
                    <span class="message-text">Welcome to the live chat! Discuss the match here.</span>
                </div>
                <div class="message user">
                    <span class="message-user">SportsFan23:</span>
                    <span class="message-text">Great goal!</span>
                </div>
            </div>
            
            <div class="chat-input">
                <input type="text" id="chatInput" placeholder="Type your message...">
                <button class="btn btn-primary" id="sendChatBtn">
                    <i class="fas fa-paper-plane"></i> Send
                </button>
            </div>
        </div>
        
        <!-- Fullscreen Button -->
        <button class="fullscreen-btn" id="fullscreenBtn">
            <i class="fas fa-expand"></i>
        </button>
    </div>

    <script>
        // Get URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const matchId = urlParams.get('id') || '';
        const matchName = urlParams.get('match') || 'Live Match';
        
        // Decode match name
        const decodedMatchName = decodeURIComponent(matchName);
        
        // More comprehensive match data
        const matchDatabase = {
            // NBA Matches
            'nba-lakers-spurs-1710949200': {
                title: 'Los Angeles Lakers vs San Antonio Spurs',
                time: '7:30 PM ET, Today',
                tournament: 'NBA Regular Season 2024',
                sport: 'NBA',
                isLive: true,
                streams: [
                    {name: 'Stream 1 - Main HD', url: 'https://topembed.pw/channel/exlosanch11', quality: 'HD'},
                    {name: 'Stream 2 - Backup', url: 'https://topembed.pw/channel/exlosanch22', quality: 'SD'},
                    {name: 'Stream 3 - Alternative', url: 'https://topembed.pw/channel/tsn4', quality: 'HD'}
                ]
            },
            'nba-warriors-nuggets-1710952800': {
                title: 'Golden State Warriors vs Denver Nuggets',
                time: '8:00 PM ET, Today',
                tournament: 'NBA Playoffs',
                sport: 'NBA',
                isLive: true,
                streams: [
                    {name: 'Main Stream HD', url: 'https://topembed.pw/channel/espn', quality: 'HD'},
                    {name: 'Alternative Stream', url: 'https://topembed.pw/channel/abc', quality: 'SD'}
                ]
            },
            
            // NFL Matches
            'nfl-chiefs-bills-1710956400': {
                title: 'Kansas City Chiefs vs Buffalo Bills',
                time: '8:20 PM ET, Today',
                tournament: 'NFL 2024 Season',
                sport: 'NFL',
                isLive: true,
                streams: [
                    {name: 'NFL Stream HD', url: 'https://topembed.pw/channel/foxsports', quality: 'HD'},
                    {name: 'Backup Stream', url: 'https://topembed.pw/channel/cbs', quality: 'SD'}
                ]
            },
            
            // UFC Matches
            'ufc-300-1710960000': {
                title: 'UFC 300: Main Event',
                time: '10:00 PM ET, Today',
                tournament: 'UFC 300',
                sport: 'UFC',
                isLive: true,
                streams: [
                    {name: 'UFC Main Event HD', url: 'https://topembed.pw/channel/ufc', quality: 'HD'},
                    {name: 'PPV Stream', url: 'https://topembed.pw/channel/espnplus', quality: 'HD'}
                ]
            },
            
            // Boxing Matches
            'boxing-fury-usyk-1710963600': {
                title: 'Tyson Fury vs Oleksandr Usyk',
                time: '11:00 PM ET, Today',
                tournament: 'Heavyweight Championship',
                sport: 'Boxing',
                isLive: true,
                streams: [
                    {name: 'Boxing HD Stream', url: 'https://topembed.pw/channel/ppvboxing', quality: 'HD'},
                    {name: 'Alternative Stream', url: 'https://topembed.pw/channel/dazn', quality: 'SD'}
                ]
            },
            
            // Default match if no ID found
            'default': {
                title: decodedMatchName || 'Live Sports Match',
                time: new Date().toLocaleTimeString('en-US', {hour: '2-digit', minute:'2-digit'}) + ' ET, Today',
                tournament: 'Live Tournament',
                sport: 'Live Sport',
                isLive: true,
                streams: [
                    {name: 'Main Stream HD', url: 'https://topembed.pw/channel/exlosanch11', quality: 'HD'},
                    {name: 'Backup Stream 1', url: 'https://topembed.pw/channel/exlosanch22', quality: 'SD'},
                    {name: 'Backup Stream 2', url: 'https://topembed.pw/channel/tsn4', quality: 'HD'}
                ]
            }
        };
        
        // Initialize stream page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Stream page loaded for match:', matchId);
            console.log('Match name:', decodedMatchName);
            
            // Load match data
            loadMatchData();
            
            // Setup player controls
            setupPlayerControls();
            
            // Setup chat
            setupChat();
            
            // Update stats periodically
            setInterval(updateStreamStats, 5000);
            
            // Update viewer count
            setInterval(updateViewerCount, 10000);
            
            // Update page title
            document.title = `${decodedMatchName} - Live Stream | LiveSports`;
        });
        
        // Load match data
        function loadMatchData() {
            // Try to find match by ID first
            let matchData = matchDatabase[matchId];
            
            // If not found by ID, use default or search by name
            if (!matchData) {
                // Try to find by partial match name
                for (const key in matchDatabase) {
                    if (key !== 'default' && decodedMatchName.toLowerCase().includes(key.toLowerCase().split('-')[0])) {
                        matchData = matchDatabase[key];
                        break;
                    }
                }
                
                // If still not found, use default
                if (!matchData) {
                    matchData = matchDatabase['default'];
                    matchData.title = decodedMatchName || matchData.title;
                }
            }
            
            console.log('Loaded match data:', matchData);
            
            // Update page elements with match data
            document.getElementById('matchTitle').textContent = matchData.title;
            document.getElementById('matchTime').textContent = matchData.time;
            document.getElementById('matchTournament').textContent = matchData.tournament;
            document.getElementById('matchSport').textContent = matchData.sport;
            
            // Update status badge
            const statusElement = document.getElementById('matchStatus');
            if (matchData.isLive) {
                statusElement.innerHTML = '<span class="live-badge">LIVE NOW</span>';
            } else {
                statusElement.innerHTML = '<span style="background:#6b7280;color:white;padding:4px 12px;border-radius:50px;font-size:0.85rem;font-weight:600;">UPCOMING</span>';
            }
            
            // Load main stream
            if (matchData.streams && matchData.streams.length > 0) {
                const mainStream = matchData.streams[0];
                const iframe = document.getElementById('mainStream');
                iframe.src = mainStream.url;
                
                console.log('Loading main stream:', mainStream.url);
                
                // Create alternative stream cards
                const altStreamsDiv = document.getElementById('altStreams');
                altStreamsDiv.innerHTML = '';
                
                matchData.streams.forEach((stream, index) => {
                    const altCard = document.createElement('div');
                    altCard.className = 'alt-stream-card';
                    altCard.innerHTML = `
                        <div class="stream-icon">
                            <i class="fas fa-play-circle"></i>
                        </div>
                        <div class="stream-info">
                            <div class="stream-name">${stream.name}</div>
                            <div class="quality-badge">${stream.quality}</div>
                        </div>
                        <button class="btn btn-small" onclick="switchStream('${stream.url}', '${stream.name}')">
                            Switch
                        </button>
                    `;
                    altStreamsDiv.appendChild(altCard);
                });
            }
            
            // Update sport icon in header
            const sportIcon = getSportIcon(matchData.sport);
            const headerIcon = document.querySelector('.stream-title h1 i');
            if (headerIcon) {
                headerIcon.className = sportIcon;
            }
        }
        
        // Get sport icon
        function getSportIcon(sport) {
            const icons = {
                'NBA': 'fas fa-basketball-ball',
                'NFL': 'fas fa-football-ball',
                'UFC': 'fas fa-user-ninja',
                'Boxing': 'fas fa-boxing-glove',
                'Football': 'fas fa-futbol',
                'NHL': 'fas fa-hockey-puck',
                'Tennis': 'fas fa-tennis-ball',
                'Golf': 'fas fa-golf-ball',
                'Soccer': 'fas fa-futbol'
            };
            return icons[sport] || 'fas fa-play-circle';
        }
        
        // Switch stream function
        window.switchStream = function(streamUrl, streamName) {
            const iframe = document.getElementById('mainStream');
            iframe.src = streamUrl;
            
            // Show notification
            showNotification(`Switching to ${streamName || 'alternative stream'}...`);
            
            // Highlight the active stream
            const altCards = document.querySelectorAll('.alt-stream-card');
            altCards.forEach(card => {
                card.style.background = '#334155';
                const cardName = card.querySelector('.stream-name').textContent;
                if (cardName === streamName) {
                    card.style.background = '#475569';
                    card.style.border = '1px solid #dc2626';
                }
            });
        };
        
        // Setup player controls
        function setupPlayerControls() {
            const refreshBtn = document.getElementById('refreshBtn');
            const fullscreenBtn = document.getElementById('fullscreenBtn');
            const playPauseBtn = document.getElementById('playPauseBtn');
            const muteBtn = document.getElementById('muteBtn');
            
            // Refresh stream
            refreshBtn.addEventListener('click', function() {
                const iframe = document.getElementById('mainStream');
                const currentSrc = iframe.src;
                iframe.src = '';
                setTimeout(() => {
                    iframe.src = currentSrc;
                    showNotification('Stream refreshed successfully');
                }, 100);
            });
            
            // Fullscreen
            fullscreenBtn.addEventListener('click', function() {
                const playerContainer = document.getElementById('playerContainer');
                
                if (!document.fullscreenElement) {
                    if (playerContainer.requestFullscreen) {
                        playerContainer.requestFullscreen();
                        fullscreenBtn.innerHTML = '<i class="fas fa-compress"></i>';
                    }
                } else {
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                        fullscreenBtn.innerHTML = '<i class="fas fa-expand"></i>';
                    }
                }
            });
            
            // Fullscreen change event
            document.addEventListener('fullscreenchange', function() {
                const fullscreenBtn = document.getElementById('fullscreenBtn');
                if (!document.fullscreenElement) {
                    fullscreenBtn.innerHTML = '<i class="fas fa-expand"></i>';
                }
            });
            
            // Play/Pause
            playPauseBtn.addEventListener('click', function() {
                const icon = playPauseBtn.querySelector('i');
                if (icon.classList.contains('fa-pause')) {
                    icon.className = 'fas fa-play';
                    playPauseBtn.innerHTML = '<i class="fas fa-play"></i> Play';
                } else {
                    icon.className = 'fas fa-pause';
                    playPauseBtn.innerHTML = '<i class="fas fa-pause"></i> Pause';
                }
                showNotification('Use player controls for playback');
            });
            
            // Mute
            muteBtn.addEventListener('click', function() {
                const icon = muteBtn.querySelector('i');
                if (icon.classList.contains('fa-volume-up')) {
                    icon.className = 'fas fa-volume-mute';
                    muteBtn.innerHTML = '<i class="fas fa-volume-mute"></i> Unmute';
                } else {
                    icon.className = 'fas fa-volume-up';
                    muteBtn.innerHTML = '<i class="fas fa-volume-up"></i> Mute';
                }
                showNotification('Use player controls for volume');
            });
        }
        
        // Setup chat
        function setupChat() {
            const chatInput = document.getElementById('chatInput');
            const sendChatBtn = document.getElementById('sendChatBtn');
            const chatMessages = document.getElementById('chatMessages');
            
            sendChatBtn.addEventListener('click', sendMessage);
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendMessage();
            });
            
            function sendMessage() {
                const message = chatInput.value.trim();
                if (message) {
                    // Add user message
                    const userMessage = document.createElement('div');
                    userMessage.className = 'message user';
                    userMessage.innerHTML = `
                        <span class="message-user">You:</span>
                        <span class="message-text">${message}</span>
                    `;
                    chatMessages.appendChild(userMessage);
                    chatInput.value = '';
                    
                    // Simulate random responses after delay
                    setTimeout(() => {
                        const responses = [
                            "Great match!",
                            "Nice play!",
                            "What a goal!",
                            "This stream is good quality",
                            "Go team!",
                            "Amazing performance!",
                            "I can't believe that move!",
                            "Best match of the season!"
                        ];
                        const randomName = 'Fan' + Math.floor(Math.random() * 1000);
                        const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                        
                        const responseMessage = document.createElement('div');
                        responseMessage.className = 'message other-user';
                        responseMessage.innerHTML = `
                            <span class="message-user">${randomName}:</span>
                            <span class="message-text">${randomResponse}</span>
                        `;
                        chatMessages.appendChild(responseMessage);
                        
                        // Scroll to bottom
                        chatMessages.scrollTop = chatMessages.scrollHeight;
                    }, 1000 + Math.random() * 2000);
                    
                    // Scroll to bottom
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }
            }
        }
        
        // Update stream stats
        function updateStreamStats() {
            // Simulate changing stats
            const viewerCount = document.getElementById('viewerCount');
            const bufferRate = document.getElementById('bufferRate');
            const streamDelay = document.getElementById('streamDelay');
            const streamQuality = document.getElementById('streamQuality');
            
            // Update viewer count (random)
            const currentViewers = parseInt(viewerCount.textContent.replace(',', '')) || 1234;
            const change = Math.floor(Math.random() * 50) - 20;
            const newViewers = Math.max(100, currentViewers + change);
            viewerCount.textContent = newViewers.toLocaleString();
            
            // Update buffer rate
            const buffer = Math.floor(Math.random() * 5);
            bufferRate.textContent = buffer + '%';
            
            // Update delay
            const delays = ['Live', 'Live', 'Live', '< 30s', '< 1min'];
            streamDelay.textContent = delays[Math.floor(Math.random() * delays.length)];
            
            // Occasionally change quality
            if (Math.random() > 0.9) {
                const qualities = ['HD', 'SD', '720p', '1080p'];
                streamQuality.textContent = qualities[Math.floor(Math.random() * qualities.length)];
            }
        }
        
        // Update viewer count
        function updateViewerCount() {
            const onlineUsers = document.getElementById('onlineUsers');
            const current = parseInt(onlineUsers.textContent) || 124;
            const change = Math.floor(Math.random() * 20) - 5;
            onlineUsers.textContent = Math.max(10, current + change);
        }
        
        // Show notification
        function showNotification(message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #dc2626;
                color: white;
                padding: 12px 24px;
                border-radius: 8px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.3);
                z-index: 1000;
                animation: slideIn 0.3s ease;
                font-weight: 600;
            `;
            
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    if (notification.parentNode) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }
        
        // Add CSS for animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>